<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>한국 울트론</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header>
    <div style="position: absolute; padding: 8px"><b>P</b>owerful small <b>L</b>anguage <b>M</b>odel</div>
    <img src="logo.png" alt="Korean Ultron">
</header>

<main>
    <div class="container">
        <label for="promptInput">입력 허용 길이: 공백 제외 2 ~ 18자</label>
        <input
                type="text"
                class="prompt-input"
                placeholder="엔터키로 입력 완료"
                id="promptInput"
                maxlength="29"
                minlength="2"
                onkeydown="onInput(event)"
        >
        <div class="output-box" id="outputBox"></div>
    </div>
</main>

<footer>
    매 입력은 이전 대화와 이어지지 않습니다 <br>
    울트론의 응답은 사실이 아닙니다. 사실 조회용으로 사용하지 마세요
</footer>

<script>
    function onInput(e) {
        if (e.key === 'Enter') {
            const input = document.getElementById('promptInput').value;
            if (input.trim().length < 2 || input.replace(/\s/g, '').length > 18) return
            const output = document.getElementById('outputBox')
            output.textContent = 'Fetching.. ⌛'
            fetch(`/plm?pureSrc=${input}&export=true`).then(res => {
                if(res.ok) {
                    res.json().then(({out: list}) => output.textContent = list[0] ? list[0].export : 'Empty ⚠️')
                } else output.textContent = res.status + ' ⚠️'
            })
        }
    }
</script>
</body>
</html>
